<?xml version="1.0" encoding="UTF-8" ?>
<ots:OTS xmlns:ots="http://www.opentrafficsim.org/ots" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.opentrafficsim.org/ots ../../../../../ots-parser-xml/src/main/resources/xsd/ots.xsd"
	xmlns:xi="http://www.w3.org/2001/XInclude">

	<ots:DEFINITIONS>

		<xi:include href="../xsd/defaults/default_gtutypes.xml">
      <xi:fallback>
        <xi:include href="../../../../../ots-parser-xml/src/main/resources/xsd/defaults/default_gtutypes.xml" />
      </xi:fallback>
    </xi:include>
		<xi:include href="../xsd/defaults/default_linktypes.xml">
      <xi:fallback>
        <xi:include href="../../../../../ots-parser-xml/src/main/resources/xsd/defaults/default_linktypes.xml" />
      </xi:fallback>
    </xi:include>
		<xi:include href="../xsd/defaults/default_lanetypes.xml">
      <xi:fallback>
        <xi:include href="../../../../../ots-parser-xml/src/main/resources/xsd/defaults/default_lanetypes.xml" />
      </xi:fallback>
    </xi:include>

		<ots:GTUTEMPLATES>
			<ots:GTUTEMPLATE DEFAULT="true" GTUTYPE="CAR" ID="CAR">
				<ots:LENGTHDIST LENGTHUNIT="m">
					<ots:UNIFORM MIN="3.0" MAX="4.0" />
				</ots:LENGTHDIST>
				<ots:WIDTHDIST LENGTHUNIT="m">
					<ots:UNIFORM MIN="1.7" MAX="2.0" />
				</ots:WIDTHDIST>
				<ots:MAXSPEEDDIST SPEEDUNIT="km/h">
					<ots:CONSTANT C="120" />
				</ots:MAXSPEEDDIST>
			</ots:GTUTEMPLATE>
		</ots:GTUTEMPLATES>

		<ots:LINKTYPES>
			<ots:LINKTYPE ID="URBAN">
				<ots:COMPATIBILITY GTUTYPE="VEHICLE" DIRECTION="FORWARD" />
				<ots:SPEEDLIMIT GTUTYPE="CAR" LEGALSPEEDLIMIT="50km/h" />
			</ots:LINKTYPE>
		</ots:LINKTYPES>

		<ots:LANETYPES>
			<ots:LANETYPE ID="URBAN">
				<ots:COMPATIBILITY GTUTYPE="VEHICLE" DIRECTION="FORWARD" />
			</ots:LANETYPE>
		</ots:LANETYPES>

		<ots:ROADLAYOUTS>
			<ots:ROADLAYOUT ID="RIGHT" LINKTYPE="URBAN">
				<ots:SHOULDER>
					<ots:CENTEROFFSET>-2.75m</ots:CENTEROFFSET>
					<ots:WIDTH>2m</ots:WIDTH>
				</ots:SHOULDER>
				<ots:LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
					<ots:CENTEROFFSET>0.0m</ots:CENTEROFFSET>
					<ots:WIDTH>3.5m</ots:WIDTH>
				</ots:LANE>
				<ots:SHOULDER>
					<ots:CENTEROFFSET>2.75m</ots:CENTEROFFSET>
					<ots:WIDTH>2m</ots:WIDTH>
				</ots:SHOULDER>
			</ots:ROADLAYOUT>

			<ots:ROADLAYOUT ID="RIGHT2" LINKTYPE="URBAN">
				<ots:SHOULDER>
					<ots:CENTEROFFSET>-2.75m</ots:CENTEROFFSET>
					<ots:WIDTH>2m</ots:WIDTH>
				</ots:SHOULDER>
				<ots:LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
					<ots:CENTEROFFSET>0.0m</ots:CENTEROFFSET>
					<ots:WIDTH>3.5m</ots:WIDTH>
				</ots:LANE>
				<ots:STRIPE TYPE="DASHED">
					<ots:CENTEROFFSET>2.75m</ots:CENTEROFFSET>
				</ots:STRIPE>
				<ots:LANE ID="TURNLANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
					<ots:CENTEROFFSET>3.5m</ots:CENTEROFFSET>
					<ots:WIDTH>3.5m</ots:WIDTH>
				</ots:LANE>
				<ots:SHOULDER>
					<ots:CENTEROFFSET>6.25m</ots:CENTEROFFSET>
					<ots:WIDTH>2m</ots:WIDTH>
				</ots:SHOULDER>
			</ots:ROADLAYOUT>

			<ots:ROADLAYOUT ID="RIGHT2TAPER" LINKTYPE="URBAN">
				<ots:SHOULDER>
					<ots:CENTEROFFSET>-2.75m</ots:CENTEROFFSET>
					<ots:WIDTH>2m</ots:WIDTH>
				</ots:SHOULDER>
				<ots:LANE ID="LANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
					<ots:CENTEROFFSET>0.0m</ots:CENTEROFFSET>
					<ots:WIDTH>3.5m</ots:WIDTH>
				</ots:LANE>
				<ots:STRIPE TYPE="DASHED">
					<ots:CENTEROFFSET>2.25m</ots:CENTEROFFSET>
				</ots:STRIPE>
				<ots:LANE ID="TURNLANE" DESIGNDIRECTION="true" LANETYPE="URBAN">
					<ots:CENTEROFFSETSTART>0.0m</ots:CENTEROFFSETSTART>
					<ots:CENTEROFFSETEND>3.5m</ots:CENTEROFFSETEND>
					<ots:WIDTH>3.5m</ots:WIDTH>
				</ots:LANE>
				<ots:SHOULDER>
					<ots:CENTEROFFSETSTART>2.75m</ots:CENTEROFFSETSTART>
					<ots:CENTEROFFSETEND>6.25m</ots:CENTEROFFSETEND>
					<ots:WIDTH>2m</ots:WIDTH>
				</ots:SHOULDER>
			</ots:ROADLAYOUT>
		</ots:ROADLAYOUTS>
	</ots:DEFINITIONS>

	<ots:NETWORK>
		<ots:NODE ID="BLE" COORDINATE="(300,0)" DIRECTION="0 deg(E)" />
		<ots:NODE ID="BLS" COORDINATE="(0,-300)" DIRECTION="270 deg(E)" />
		<ots:NODE ID="BLW" COORDINATE="(-300,0)" DIRECTION="0 deg(E)" />
		<ots:NODE ID="BLEC" COORDINATE="(28.8,0)" DIRECTION="0 deg(E)" />
		<ots:NODE ID="BLSC" COORDINATE="(0,-18.8)" DIRECTION="270 deg(E)" />
		<ots:NODE ID="BLWC" COORDINATE="(-18.8,0)" DIRECTION="0 deg(E)" />

		<ots:NODE ID="TRE" COORDINATE="(300,15)" DIRECTION="180 deg(E)" />
		<ots:NODE ID="TRS" COORDINATE="(15,-300)" DIRECTION="90 deg(E)" />
		<ots:NODE ID="TRW" COORDINATE="(-300,15)" DIRECTION="180 deg(E)" />
		<ots:NODE ID="TREC" COORDINATE="(18.8,15)" DIRECTION="180 deg(E)" />
		<ots:NODE ID="TRE2" COORDINATE="(20,15)" DIRECTION="180 deg(E)" />
		<ots:NODE ID="TRE3" COORDINATE="(100,15)" DIRECTION="180 deg(E)" />
		<ots:NODE ID="TRSC" COORDINATE="(15,-18.8)" DIRECTION="90 deg(E)" />
		<ots:NODE ID="TRWC" COORDINATE="(-18.8,15)" DIRECTION="180 deg(E)" />

		<ots:LINK ID="WWC" NODESTART="BLW" NODEEND="BLWC" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="WCEC" NODESTART="BLWC" NODEEND="BLEC" TYPE="URBAN" PRIORITY="PRIORITY">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="ECE" NODESTART="BLEC" NODEEND="BLE" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="SCS" NODESTART="BLSC" NODEEND="BLS" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="WCSC" NODESTART="BLWC" NODEEND="BLSC" TYPE="URBAN">
			<ots:BEZIER />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="EE3" NODESTART="TRE" NODEEND="TRE3" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="E3E2" NODESTART="TRE3" NODEEND="TRE2" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT2TAPER</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="E2EC" NODESTART="TRE2" NODEEND="TREC" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT2</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="ECWC" NODESTART="TREC" NODEEND="TRWC" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="WCW" NODESTART="TRWC" NODEEND="TRW" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="SSC" NODESTART="TRS" NODEEND="TRSC" TYPE="URBAN">
			<ots:STRAIGHT />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="SCEC" NODESTART="TRSC" NODEEND="BLEC" TYPE="URBAN">
			<ots:BEZIER />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="SCWC" NODESTART="TRSC" NODEEND="TRWC" TYPE="URBAN">
			<ots:BEZIER />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

		<ots:LINK ID="ECSC" NODESTART="TREC" NODEEND="BLSC" TYPE="URBAN" OFFSETSTART="3.5m" OFFSETEND="0m">
			<ots:BEZIER />
			<ots:DEFINEDLAYOUT>RIGHT</ots:DEFINEDLAYOUT>
		</ots:LINK>

	</ots:NETWORK>


	<ots:NETWORKDEMAND>

		<ots:SHORTESTROUTE ID="EW" GTUTYPE="CAR">
			<ots:FROM NODE="TRE" />
			<ots:TO NODE="TRW" />
			<ots:DISTANCECOST>1/m</ots:DISTANCECOST>
		</ots:SHORTESTROUTE>

		<ots:SHORTESTROUTE ID="WE" GTUTYPE="CAR">
			<ots:FROM NODE="BLW" />
			<ots:TO NODE="BLE" />
			<ots:DISTANCECOST>1/m</ots:DISTANCECOST>
		</ots:SHORTESTROUTE>

		<ots:SHORTESTROUTE ID="WS" GTUTYPE="CAR">
			<ots:FROM NODE="BLW" />
			<ots:TO NODE="BLS" />
			<ots:DISTANCECOST>1/m</ots:DISTANCECOST>
		</ots:SHORTESTROUTE>

		<ots:SHORTESTROUTE ID="SW" GTUTYPE="CAR">
			<ots:FROM NODE="TRS" />
			<ots:TO NODE="TRW" />
			<ots:DISTANCECOST>1/m</ots:DISTANCECOST>
		</ots:SHORTESTROUTE>

		<ots:SHORTESTROUTE ID="ES" GTUTYPE="CAR">
			<ots:FROM NODE="TRE" />
			<ots:TO NODE="BLS" />
			<ots:DISTANCECOST>1/m</ots:DISTANCECOST>
		</ots:SHORTESTROUTE>

		<ots:SHORTESTROUTE ID="SE" GTUTYPE="CAR">
			<ots:FROM NODE="TRS" />
			<ots:TO NODE="BLE" />
			<ots:DISTANCECOST>1/m</ots:DISTANCECOST>
		</ots:SHORTESTROUTE>

		<ots:SHORTESTROUTEMIX ID="E" GTUTYPE="CAR">
			<ots:SHORTESTROUTE WEIGHT="0.4" ID="EW" />
			<ots:SHORTESTROUTE WEIGHT="0.6" ID="ES" />
		</ots:SHORTESTROUTEMIX>

		<ots:SHORTESTROUTEMIX ID="W" GTUTYPE="CAR">
			<ots:SHORTESTROUTE WEIGHT="0.8" ID="WE" />
			<ots:SHORTESTROUTE WEIGHT="0.2" ID="WS" />
		</ots:SHORTESTROUTEMIX>

		<ots:SHORTESTROUTEMIX ID="S" GTUTYPE="CAR">
			<ots:SHORTESTROUTE WEIGHT="0.5" ID="SW" />
			<ots:SHORTESTROUTE WEIGHT="0.5" ID="SE" />
		</ots:SHORTESTROUTEMIX>

		<ots:GENERATOR LINK="EE3" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
			<ots:GTUTEMPLATE>CAR</ots:GTUTEMPLATE>
			<ots:SHORTESTROUTEMIX>E</ots:SHORTESTROUTEMIX>
			<ots:FREQUENCY>15/min</ots:FREQUENCY>
			<ots:ROOMCHECKER>CF</ots:ROOMCHECKER>
		</ots:GENERATOR>
		<ots:GENERATOR LINK="SSC" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
			<ots:GTUTEMPLATE>CAR</ots:GTUTEMPLATE>
			<ots:SHORTESTROUTEMIX>S</ots:SHORTESTROUTEMIX>
			<ots:FREQUENCY>6/min</ots:FREQUENCY>
			<ots:ROOMCHECKER>CF</ots:ROOMCHECKER>
		</ots:GENERATOR>
		<ots:GENERATOR LINK="WWC" LANE="LANE" POSITION="10m" DIRECTION="DIR_PLUS">
			<ots:GTUTEMPLATE>CAR</ots:GTUTEMPLATE>
			<ots:SHORTESTROUTEMIX>W</ots:SHORTESTROUTEMIX>
			<ots:FREQUENCY>6/min</ots:FREQUENCY>
			<ots:ROOMCHECKER>CF</ots:ROOMCHECKER>
		</ots:GENERATOR>

		<ots:SINK LINK="ECE" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />
		<ots:SINK LINK="SCS" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />
		<ots:SINK LINK="WCW" POSITION="END-20m" LANE="LANE" DIRECTION="DIR_PLUS" />

	</ots:NETWORKDEMAND>

	<ots:SCENARIO></ots:SCENARIO>

	<ots:RUN>
		<ots:RUNLENGTH>1h</ots:RUNLENGTH>
		<ots:RANDOMSTREAMS>
			<ots:RANDOMSTREAM ID="default">
				<ots:REPLICATION ID="1" SEED="1" />
			</ots:RANDOMSTREAM>
			<ots:RANDOMSTREAM ID="generation">
				<ots:REPLICATION ID="1" SEED="1" />
			</ots:RANDOMSTREAM>
		</ots:RANDOMSTREAMS>
	</ots:RUN>

	<ots:ANIMATION>
		<ots:DEFAULTS>
			<ots:SHOULDER COLOR="RGB(0,128,0)" />
		</ots:DEFAULTS>
	</ots:ANIMATION>

</ots:OTS>